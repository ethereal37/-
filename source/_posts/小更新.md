---
title: é¼ æ ‡é­”æ”¹ã€åŠ¨æ€èƒŒæ™¯
date: 2024-12-28 18:56:32
tags: æŠ€æœ¯
top_img: transparent
cover: https://tuchuang.voooe.cn/images/2025/03/03/22.jpg
copyright_info: æ­¤æ–‡ç« ç‰ˆæƒå½’Etherealæ‰€æœ‰ï¼Œå¦‚æœ‰è½¬è½½ï¼Œè¯·æ³¨æ˜æ¥è‡ªåŸä½œè€…
categories:
  - æŠ€æœ¯
  - Hexo
  - Butterfly
---
## å¥½æ¶ˆæ¯ï¼
* è¿™æ¬¡æ˜¯åŠ¨æ€èƒŒæ™¯åŠ äº†ç‰¹æ•ˆåœ¨é‡Œé¢<br> 
1.**è¯¦è§å®˜æ–¹æ–‡æ¡£** [ç‚¹å‡»è·³è½¬](https://butterfly.js.org/posts/4aa8abbe/)
* é¼ æ ‡æˆ‘æ˜¯è·Ÿç€FomalhautğŸ¥é­”æ”¹äº†ä¸€ä¸‹ï¼Œé¢œè‰²ä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®çš„(ä¸è¿‡æˆ‘æ‡’ï¼Œé¢œè‰²æ˜¯è·Ÿé‚£ä¸ªå¤§ä½¬ä¸€æ¨¡ä¸€æ ·çš„)ï¼Œè¿™é‡Œå¯ä»¥ç»™éœ€è¦é­”æ”¹çš„æœ‹å‹ä»¬å†™ä¸€ä¸ªæ­¥éª¤,ä¹Ÿå¯ä»¥ç›´æ¥è·³è½¬[FomalhautğŸ¥çš„æ­¥éª¤](https://www.fomal.cc/posts/5389e93f.html)<br>
1.**åœ¨è‡ªå·±çš„æ ¹ç›®å½•ä¸Šæ‰¾åˆ°sourceè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨sourceé‡Œæ‰¾åˆ°jsæ–‡ä»¶å¤¹,æœ€ååœ¨jsæ–‡ä»¶å¤¹é‡Œåˆ›å»ºcursor.jsçš„æ–‡ä»¶,-->[hexo]\source\js\cursor.jsè¿™æ˜¯æ•´ä¸ªè·¯å¾„,åœ¨cursor.jsé‡Œå¦‚ä¸‹ä»£ç **
```js
var CURSOR;

Math.lerp = (a, b, n) => (1 - n) * a + n * b;

const getStyle = (el, attr) => {
    try {
        return window.getComputedStyle
            ? window.getComputedStyle(el)[attr]
            : el.currentStyle[attr];
    } catch (e) {}
    return "";
};

class Cursor {
    constructor() {
        this.pos = {curr: null, prev: null};
        this.pt = [];
        this.create();
        this.init();
        this.render();
    }

    move(left, top) {
        this.cursor.style["left"] = `${left}px`;
        this.cursor.style["top"] = `${top}px`;
    }

    create() {
        if (!this.cursor) {
            this.cursor = document.createElement("div");
            this.cursor.id = "cursor";
            this.cursor.classList.add("hidden");
            document.body.append(this.cursor);
        }

        var el = document.getElementsByTagName('*');
        for (let i = 0; i < el.length; i++)
            if (getStyle(el[i], "cursor") == "pointer")
                this.pt.push(el[i].outerHTML);

        document.body.appendChild((this.scr = document.createElement("style")));
        // è¿™é‡Œæ”¹å˜é¼ æ ‡æŒ‡é’ˆçš„é¢œè‰² ç”±svgç”Ÿæˆ
        this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='rgb(57, 197, 187)'/></svg>") 4 4, auto}`
    }

    refresh() {
        this.scr.remove();
        this.cursor.classList.remove("hover");
        this.cursor.classList.remove("active");
        this.pos = {curr: null, prev: null};
        this.pt = [];

        this.create();
        this.init();
        this.render();
    }

    init() {
        document.onmouseover  = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.add("hover");
        document.onmouseout   = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.remove("hover");
        document.onmousemove  = e => {(this.pos.curr == null) && this.move(e.clientX - 8, e.clientY - 8); this.pos.curr = {x: e.clientX - 8, y: e.clientY - 8}; this.cursor.classList.remove("hidden");};
        document.onmouseenter = e => this.cursor.classList.remove("hidden");
        document.onmouseleave = e => this.cursor.classList.add("hidden");
        document.onmousedown  = e => this.cursor.classList.add("active");
        document.onmouseup    = e => this.cursor.classList.remove("active");
    }

    render() {
        if (this.pos.prev) {
            this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, 0.15);
            this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, 0.15);
            this.move(this.pos.prev.x, this.pos.prev.y);
        } else {
            this.pos.prev = this.pos.curr;
        }
        requestAnimationFrame(() => this.render());
    }
}

(() => {
    CURSOR = new Cursor();
    // éœ€è¦é‡æ–°è·å–åˆ—è¡¨æ—¶ï¼Œä½¿ç”¨ CURSOR.refresh()
})();
```
å…¶ä¸­ï¼š
```
this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='1.0' fill='rgb(57, 197, 187)'/></svg>") 4 4, auto}`
```
è¿™ä¸€è¡Œæ˜¯ç”¨æ¥æ”¹é¢œè‰²çš„ï¼Œåœ¨fillè¿™é‡Œï¼Œé¢œè‰²éšä½ è‡ªå·±å–œå¥½ï¼Œä¹Ÿå¯ä»¥ç”¨FomalhautğŸ¥çš„ã€‚<br>
2.**åœ¨Hexo\source\css\custom.cssé‡Œä¹Ÿæ·»åŠ å¦‚ä¸‹ä»£ç :**
```css
/* é¼ æ ‡æ ·å¼ */
#cursor {
  position: fixed;
  width: 16px;
  height: 16px;
  /* è¿™é‡Œæ”¹å˜è·Ÿéšçš„åº•è‰² */
  background: var(--theme-color);
  border-radius: 8px;
  opacity: 0.25;
  z-index: 10086;
  pointer-events: none;
  transition: 0.2s ease-in-out;
  transition-property: background, opacity, transform;
}

#cursor.hidden {
  opacity: 0;
}

#cursor.hover {
  opacity: 0.1;
  transform: scale(2.5);
  -webkit-transform: scale(2.5);
  -moz-transform: scale(2.5);
  -ms-transform: scale(2.5);
  -o-transform: scale(2.5);
}

#cursor.active {
  opacity: 0.5;
  transform: scale(0.5);
  -webkit-transform: scale(0.5);
  -moz-transform: scale(0.5);
  -ms-transform: scale(0.5);
  -o-transform: scale(0.5);
}
```
é¼ æ ‡é˜´å½±çš„é¢œè‰²ï¼Œå¯ä»¥éšè‡ªå·±æ¥æ”¹å˜ã€‚
```css
background: var(--theme-color);  /*æˆ‘çš„å’ŒFomalhautğŸ¥ä¸€æ ·éƒ½æ˜¯ rgb(57,197,187)*/
```
3.**åœ¨_config.butterfly.ymlé‡Œæ‰¾åˆ°Injectçš„é…ç½®ï¼Œå¹¶åœ¨headå¤„å’Œbottomå¤„æ·»åŠ å¦‚ä¸‹ï¼š(è¿™é‡Œç›´æ¥ç”¨äº†FomalhautğŸ¥çš„ä»£ç æ¡†)**
```yml
inject:
  head:
+    - <link rel="stylesheet" href="/css/custom.css"> 
  bottom:
+    - <script defer src="/js/cursor.js"></script>
```
4.**æœ€åå°±æ˜¯ä¸€é”®ä¸‰è¿äº†**
```bush
hexo cl;hexo g;hexo d
```
åœ¨éƒ¨ç½²çš„ç½‘ç«™æŸ¥çœ‹æœ€ç»ˆæ•ˆæœã€‚
## But åæ¶ˆæ¯!
* ä»Šå¤©ä¸€ä¸‹åˆéƒ½åœ¨æé‚£ä¸ªè¯„è®ºç³»ç»Ÿï¼Œæ³¨å†Œäº†å„ç§æ•°æ®åº“ï¼Œå¥½éº»çƒ¦ä¸€åšå°±åšåˆ°äº†å¤©é»‘äº†
* æˆ‘ä»€ä¹ˆæ—¶å€™æ‰èƒ½è¿›é˜¶æˆä¸ºå¤§ä½¬


